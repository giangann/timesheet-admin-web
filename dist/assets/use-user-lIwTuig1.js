import{r as t,u as i,q as U}from"./index-q_5Tqw1q.js";import{a as p}from"./map-util-BcGf2YPr.js";import{u as l}from"./use-api-DWFDTJE-.js";const f=()=>{const[c,a]=t.useState(!1),[n,e]=t.useState([]),{enqueueSnackbar:r}=i(),{get:o}=l(),u=t.useCallback(async()=>{a(!0);try{const s=await o("/users",{...U});s.statusCode===200?e(s.data.users):r(s.error??s.message??"Unknown error",{variant:"error"})}catch(s){r(s.message,{variant:"error"})}finally{a(!1)}},[o,r]);return t.useEffect(()=>{u()},[o,r,u]),{users:n,isLoading:c,refetchUsers:u}},S=c=>{const{isLoading:a,users:n,refetchUsers:e}=f(),r=t.useMemo(()=>p(n,"id"),[n]),o=t.useMemo(()=>r.get(c.toString()),[r,c]);return{isLoading:a,userDetail:o,onFetchUserDetail:e}},b=()=>{const[c,a]=t.useState(!1),{put:n}=l(),{enqueueSnackbar:e}=i();return{onUpdateUser:t.useCallback(async(o,u)=>{a(!0);try{const s=await n("/users",{id:o},u);s.statusCode===200?e("Cập nhật thành công",{variant:"success"}):e(s.error??s.message??"Unknown error",{variant:"error"})}catch(s){e(s.message,{variant:"error"})}finally{a(!1)}},[n,e]),isSubmitting:c}};export{b as a,S as b,f as u};
